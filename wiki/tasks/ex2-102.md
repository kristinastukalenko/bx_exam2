# [ex2-102] Добавить англоязычную версию сайта (один инфоблок).

*Подробное описание задачи смотреть в материалах: [примеры заданий (pdf)](../pubinfo/Ex2AllType.pdf)*

## Общие требования

* Создать второй сайт:
    * используя принцип размещения – на одном домене;
    * язык – английский.

* Второй сайт разместить в разделе первого сайта, путь /ex2/site2/, добавить пункт в главное меню «Экзамен2», и пункт в левом меню «Второй сайт».

## Решение

* Копируем шаблон из материалов: `/ex2-102-materials/ex2_multilang_template_materials/`   
![](../screen/img_3.png)
* Создаём раздел и пункт в левом меню 1-го сайта: /ex2/site2/
![](../screen/img_4.png)
* Из материалов копируем файлы about.php в папку /ex2/site2/ и motto.php в папку /ex2/site2/include/

* Создаем новый сайт (Настройки продукта > Сайты > Список сайтов):
    * ID: s2;
    * Название: Второй сайт;
    * По умолчанию: Да; (При отмеченной опции сайт будет загружаться по умолчанию.)
    * Папка сайта: /ex2/site2/;
    * Название веб-сайта: Второй сайт;
    * Язык: EN;
    * Региональные настройки: EN.
    * Шаблон сайта: "ex2-102 материалы"  
![](../screen/img_5.png)
* Правим меню 2-го сайта:
    * Находясь на 2-м сайте редактируем верхнее меню, удалив все пункты и добавив – Main (/ex2/site2/index.php) и About (/ex2/site2/about.php)
    * Правим заголовок

* Добавляем редактируемую область motto.php со слоганом в файл header.php в <td id="banner-slogan">, по аналогии, как на 1-м сайте

* Операции с ИБ:
    * В ИБ «Новости» ставим галочку - Сайты: [s2] Второй сайт.
    * Добавляем два (в задании ошибка - написано, что 3) свойства:
        * Название на английском (строка), код: NAME_EN;
        * Анонс на английском (HTML/текст), код: PREVIEW_TEXT_EN.
        * В элементах ИБ «Новости» ставим поле «Название на английском» под поле «Название», "Анонс на английском" под "Описание для анонса"
        * Заполняем созданные свойства ИБ согласно заданию.

* Размещаем компонент:
    * С индексной страницы 2-го сайта удаляем всё и размещаем комплексный компонент "news.list";
    * В настройках компонента:
        * Date display format: Site date format (Формат показа даты: Формат сайта);
        * Снимаем галочку с Set page title (Устанавливать заголовок страницы:);
        * Выбираем новые свойства в поле – Properties;
    * Копируем и кастомизируем шаблон компонента "news.list" в файле template.php
        * Замены "NAME" и "PREVIEW_TEXT" с учетом свойств
        * Убираем ссылки на детальный просмотр

* Добавляем переключатель языков (сайтов):
    * В header.php обоих шаблонов размещаем вызовы компонента "выбор сайта" (bitrix:main.site.selector);
    * Добавляем языковые фразы;
    * Копируем шаблон "dropdown" в шаблон сайтов ".default", т.к. шаблон компонента должен быть физически один и для первого и для второго сайта;
    * В шаблоне компонента заменяем <?=$arSite["NAME"]?> на <?=$arSite["LANG"]?>.

____
* [Задания](tasks.md)
* [README.md](../../README.md)